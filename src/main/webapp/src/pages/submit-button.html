<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">


<link rel="import" href="../common/app-data.html">

<dom-module id="submit-button">
	<template>
		<style>
			:host {
				--app-primary-color: #4285f4;
				--app-secondary-color: black;
				display: block;
			}
		</style>

		<iron-localstorage 
			name="user-storage" 
			value="{{storedUser}}"></iron-localstorage>
			
		<app-data key="userData" data="{{storedUser}}"></app-data>

		<iron-ajax
			id="submitAnswerOption"
			url="http://localhost:8080/question"
			method="put"
			content-type="application/json"
			handle-as="json"
			on-response="handleAnswer"></iron-ajax>
		
		<paper-button raised on-tap="submitAnswer">submit</paper-button>
        

		
	</template>

	<script>
		(function() {
			Polymer({
				is: 'submit-button',
				
				properties: {
					storedUser: Object,
				},
				
				submitAnswer: function() {
					this._setReqBody();
					this.$.submitAnswerOption.generateRequest();
						
					},
				
				_setReqBody: function() {
					//get the name of the checked option
				},
				
				handleAnswer: function(event, request) {
					var response = event.detail.response;
					var status = request.xhr.status;
					console.log(response);
				}
			});
		}());
	</script>
</dom-module>
